var client = new Keen({
  projectId: '5368fa5436bf5a5623000000',
  readKey: '3f324dcb5636316d6865ab0ebbbbc725224c7f8f3e8899c7733439965d6d4a2c7f13bf7765458790bd50ec76b4361687f51cf626314585dc246bb51aeb455c0a1dd6ce77a993d9c953c5fc554d1d3530ca5d17bdc6d1333ef3d8146a990c79435bb2c7d936f259a22647a75407921056'
});

var trafficChart = {"result": [{"value": [{"user.device_info.browser.family": "This Week", "result": 30}, {"user.device_info.browser.family": "Average", "result": 15}, {"user.device_info.browser.family": "Last Week", "result": 15}], "timeframe": {"start": "2014-05-04T00:00:00.000Z", "end": "2014-05-04T01:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 20}, {"user.device_info.browser.family": "Average", "result": 19}, {"user.device_info.browser.family": "Last Week", "result": 12}], "timeframe": {"start": "2014-05-04T01:00:00.000Z", "end": "2014-05-04T02:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 28}, {"user.device_info.browser.family": "Average", "result": 12}, {"user.device_info.browser.family": "Last Week", "result": 10}], "timeframe": {"start": "2014-05-04T02:00:00.000Z", "end": "2014-05-04T03:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 25}, {"user.device_info.browser.family": "Average", "result": 13}, {"user.device_info.browser.family": "Last Week", "result": 16}], "timeframe": {"start": "2014-05-04T03:00:00.000Z", "end": "2014-05-04T04:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 17}, {"user.device_info.browser.family": "Average", "result": 14}, {"user.device_info.browser.family": "Last Week", "result": 13}], "timeframe": {"start": "2014-05-04T04:00:00.000Z", "end": "2014-05-04T05:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 11}, {"user.device_info.browser.family": "Average", "result": 18}, {"user.device_info.browser.family": "Last Week", "result": 7}], "timeframe": {"start": "2014-05-04T05:00:00.000Z", "end": "2014-05-04T06:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 17}, {"user.device_info.browser.family": "Average", "result": 12}, {"user.device_info.browser.family": "Last Week", "result": 12}], "timeframe": {"start": "2014-05-04T06:00:00.000Z", "end": "2014-05-04T07:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 0}, {"user.device_info.browser.family": "Average", "result": 0}, {"user.device_info.browser.family": "Last Week", "result": 0}], "timeframe": {"start": "2014-05-04T07:00:00.000Z", "end": "2014-05-04T08:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 16}, {"user.device_info.browser.family": "Average", "result": 15}, {"user.device_info.browser.family": "Last Week", "result": 7}], "timeframe": {"start": "2014-05-04T08:00:00.000Z", "end": "2014-05-04T09:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 13}, {"user.device_info.browser.family": "Average", "result": 7}, {"user.device_info.browser.family": "Last Week", "result": 10}], "timeframe": {"start": "2014-05-04T09:00:00.000Z", "end": "2014-05-04T10:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 18}, {"user.device_info.browser.family": "Average", "result": 7}, {"user.device_info.browser.family": "Last Week", "result": 11}], "timeframe": {"start": "2014-05-04T10:00:00.000Z", "end": "2014-05-04T11:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 14}, {"user.device_info.browser.family": "Average", "result": 15}, {"user.device_info.browser.family": "Last Week", "result": 3}], "timeframe": {"start": "2014-05-04T11:00:00.000Z", "end": "2014-05-04T12:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 30}, {"user.device_info.browser.family": "Average", "result": 18}, {"user.device_info.browser.family": "Last Week", "result": 6}], "timeframe": {"start": "2014-05-04T12:00:00.000Z", "end": "2014-05-04T13:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 21}, {"user.device_info.browser.family": "Average", "result": 12}, {"user.device_info.browser.family": "Last Week", "result": 17}], "timeframe": {"start": "2014-05-04T13:00:00.000Z", "end": "2014-05-04T14:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 25}, {"user.device_info.browser.family": "Average", "result": 22}, {"user.device_info.browser.family": "Last Week", "result": 11}], "timeframe": {"start": "2014-05-04T14:00:00.000Z", "end": "2014-05-04T15:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 34}, {"user.device_info.browser.family": "Average", "result": 24}, {"user.device_info.browser.family": "Last Week", "result": 12}], "timeframe": {"start": "2014-05-04T15:00:00.000Z", "end": "2014-05-04T16:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 24}, {"user.device_info.browser.family": "Average", "result": 30}, {"user.device_info.browser.family": "Last Week", "result": 19}], "timeframe": {"start": "2014-05-04T16:00:00.000Z", "end": "2014-05-04T17:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 31}, {"user.device_info.browser.family": "Average", "result": 25}, {"user.device_info.browser.family": "Last Week", "result": 13}], "timeframe": {"start": "2014-05-04T17:00:00.000Z", "end": "2014-05-04T18:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 36}, {"user.device_info.browser.family": "Average", "result": 22}, {"user.device_info.browser.family": "Last Week", "result": 18}], "timeframe": {"start": "2014-05-04T18:00:00.000Z", "end": "2014-05-04T19:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 32}, {"user.device_info.browser.family": "Average", "result": 37}, {"user.device_info.browser.family": "Last Week", "result": 17}], "timeframe": {"start": "2014-05-04T19:00:00.000Z", "end": "2014-05-04T20:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 33}, {"user.device_info.browser.family": "Average", "result": 28}, {"user.device_info.browser.family": "Last Week", "result": 12}], "timeframe": {"start": "2014-05-04T20:00:00.000Z", "end": "2014-05-04T21:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 37}, {"user.device_info.browser.family": "Average", "result": 28}, {"user.device_info.browser.family": "Last Week", "result": 16}], "timeframe": {"start": "2014-05-04T21:00:00.000Z", "end": "2014-05-04T22:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 35}, {"user.device_info.browser.family": "Average", "result": 25}, {"user.device_info.browser.family": "Last Week", "result": 14}], "timeframe": {"start": "2014-05-04T22:00:00.000Z", "end": "2014-05-04T23:00:00.000Z"}}, {"value": [{"user.device_info.browser.family": "This Week", "result": 27}, {"user.device_info.browser.family": "Average", "result": 30}, {"user.device_info.browser.family": "Last Week", "result": 18}], "timeframe": {"start": "2014-05-04T23:00:00.000Z", "end": "2014-05-05T00:00:00.000Z"}}]};
var trafficByDay = {"result": [{"user.device_info.browser.family": "Saturday", "result": 2257}, {"user.device_info.browser.family": "Friday", "result": 1995}, {"user.device_info.browser.family": "Thursday", "result": 1041}, {"user.device_info.browser.family": "Wednesday", "result": 862}, {"user.device_info.browser.family": "Tuesday", "result": 962}, {"user.device_info.browser.family": "Monday", "result": 762}, {"user.device_info.browser.family": "Sunday", "result": 1262}]};
var trafficByDevice = {"result": [{"value": [{"user.device_info.device.family": "Other", "result": 89}, {"user.device_info.device.family": "iPhone", "result": 12}], "timeframe": {"start": "2014-05-04T00:00:00.000Z", "end": "2014-05-04T01:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 77}, {"user.device_info.device.family": "iPhone", "result": 14}], "timeframe": {"start": "2014-05-04T01:00:00.000Z", "end": "2014-05-04T02:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 73}, {"user.device_info.device.family": "iPhone", "result": 33}], "timeframe": {"start": "2014-05-04T02:00:00.000Z", "end": "2014-05-04T03:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 79}, {"user.device_info.device.family": "iPhone", "result": 18}], "timeframe": {"start": "2014-05-04T03:00:00.000Z", "end": "2014-05-04T04:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 65}, {"user.device_info.device.family": "iPhone", "result": 11}], "timeframe": {"start": "2014-05-04T04:00:00.000Z", "end": "2014-05-04T05:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 58}, {"user.device_info.device.family": "iPhone", "result": 15}], "timeframe": {"start": "2014-05-04T05:00:00.000Z", "end": "2014-05-04T06:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 56}, {"user.device_info.device.family": "iPhone", "result": 10}], "timeframe": {"start": "2014-05-04T06:00:00.000Z", "end": "2014-05-04T07:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 0}, {"user.device_info.device.family": "iPhone", "result": 0}], "timeframe": {"start": "2014-05-04T07:00:00.000Z", "end": "2014-05-04T08:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 57}, {"user.device_info.device.family": "iPhone", "result": 8}], "timeframe": {"start": "2014-05-04T08:00:00.000Z", "end": "2014-05-04T09:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 43}, {"user.device_info.device.family": "iPhone", "result": 6}], "timeframe": {"start": "2014-05-04T09:00:00.000Z", "end": "2014-05-04T10:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 52}, {"user.device_info.device.family": "iPhone", "result": 10}], "timeframe": {"start": "2014-05-04T10:00:00.000Z", "end": "2014-05-04T11:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 50}, {"user.device_info.device.family": "iPhone", "result": 11}], "timeframe": {"start": "2014-05-04T11:00:00.000Z", "end": "2014-05-04T12:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 84}, {"user.device_info.device.family": "iPhone", "result": 10}], "timeframe": {"start": "2014-05-04T12:00:00.000Z", "end": "2014-05-04T13:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 78}, {"user.device_info.device.family": "iPhone", "result": 7}], "timeframe": {"start": "2014-05-04T13:00:00.000Z", "end": "2014-05-04T14:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 87}, {"user.device_info.device.family": "iPhone", "result": 17}], "timeframe": {"start": "2014-05-04T14:00:00.000Z", "end": "2014-05-04T15:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 101}, {"user.device_info.device.family": "iPhone", "result": 14}], "timeframe": {"start": "2014-05-04T15:00:00.000Z", "end": "2014-05-04T16:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 108}, {"user.device_info.device.family": "iPhone", "result": 16}], "timeframe": {"start": "2014-05-04T16:00:00.000Z", "end": "2014-05-04T17:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 108}, {"user.device_info.device.family": "iPhone", "result": 21}], "timeframe": {"start": "2014-05-04T17:00:00.000Z", "end": "2014-05-04T18:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 121}, {"user.device_info.device.family": "iPhone", "result": 19}], "timeframe": {"start": "2014-05-04T18:00:00.000Z", "end": "2014-05-04T19:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 128}, {"user.device_info.device.family": "iPhone", "result": 11}], "timeframe": {"start": "2014-05-04T19:00:00.000Z", "end": "2014-05-04T20:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 113}, {"user.device_info.device.family": "iPhone", "result": 15}], "timeframe": {"start": "2014-05-04T20:00:00.000Z", "end": "2014-05-04T21:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 134}, {"user.device_info.device.family": "iPhone", "result": 22}], "timeframe": {"start": "2014-05-04T21:00:00.000Z", "end": "2014-05-04T22:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 111}, {"user.device_info.device.family": "iPhone", "result": 19}], "timeframe": {"start": "2014-05-04T22:00:00.000Z", "end": "2014-05-04T23:00:00.000Z"}}, {"value": [{"user.device_info.device.family": "Other", "result": 109}, {"user.device_info.device.family": "iPhone", "result": 16}], "timeframe": {"start": "2014-05-04T23:00:00.000Z", "end": "2014-05-05T00:00:00.000Z"}}]};
var trafficByTime = {"result": [{"value": [{"ad.advertiser": "Friday", "result": 7}, {"ad.advertiser": "Thursday", "result": 30}, {"ad.advertiser": "Wednesday", "result": 62}, {"ad.advertiser": "Saturday", "result": 2}], "timeframe": {"start": "2014-05-04T00:00:00.000Z", "end": "2014-05-04T01:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 3}, {"ad.advertiser": "Thursday", "result": 24}, {"ad.advertiser": "Wednesday", "result": 63}, {"ad.advertiser": "Saturday", "result": 1}], "timeframe": {"start": "2014-05-04T01:00:00.000Z", "end": "2014-05-04T02:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 13}, {"ad.advertiser": "Thursday", "result": 29}, {"ad.advertiser": "Wednesday", "result": 55}, {"ad.advertiser": "Saturday", "result": 9}], "timeframe": {"start": "2014-05-04T02:00:00.000Z", "end": "2014-05-04T03:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 18}, {"ad.advertiser": "Thursday", "result": 11}, {"ad.advertiser": "Wednesday", "result": 65}, {"ad.advertiser": "Saturday", "result": 3}], "timeframe": {"start": "2014-05-04T03:00:00.000Z", "end": "2014-05-04T04:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 14}, {"ad.advertiser": "Thursday", "result": 18}, {"ad.advertiser": "Wednesday", "result": 42}, {"ad.advertiser": "Saturday", "result": 2}], "timeframe": {"start": "2014-05-04T04:00:00.000Z", "end": "2014-05-04T05:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 10}, {"ad.advertiser": "Thursday", "result": 20}, {"ad.advertiser": "Wednesday", "result": 43}, {"ad.advertiser": "Saturday", "result": 0}], "timeframe": {"start": "2014-05-04T05:00:00.000Z", "end": "2014-05-04T06:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 4}, {"ad.advertiser": "Thursday", "result": 11}, {"ad.advertiser": "Wednesday", "result": 48}, {"ad.advertiser": "Saturday", "result": 3}], "timeframe": {"start": "2014-05-04T06:00:00.000Z", "end": "2014-05-04T07:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 0}, {"ad.advertiser": "Thursday", "result": 0}, {"ad.advertiser": "Wednesday", "result": 0}, {"ad.advertiser": "Saturday", "result": 0}], "timeframe": {"start": "2014-05-04T07:00:00.000Z", "end": "2014-05-04T08:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 7}, {"ad.advertiser": "Thursday", "result": 17}, {"ad.advertiser": "Wednesday", "result": 41}, {"ad.advertiser": "Saturday", "result": 0}], "timeframe": {"start": "2014-05-04T08:00:00.000Z", "end": "2014-05-04T09:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 2}, {"ad.advertiser": "Thursday", "result": 13}, {"ad.advertiser": "Wednesday", "result": 34}, {"ad.advertiser": "Saturday", "result": 0}], "timeframe": {"start": "2014-05-04T09:00:00.000Z", "end": "2014-05-04T10:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 4}, {"ad.advertiser": "Thursday", "result": 23}, {"ad.advertiser": "Wednesday", "result": 32}, {"ad.advertiser": "Saturday", "result": 3}], "timeframe": {"start": "2014-05-04T10:00:00.000Z", "end": "2014-05-04T11:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 14}, {"ad.advertiser": "Thursday", "result": 18}, {"ad.advertiser": "Wednesday", "result": 29}, {"ad.advertiser": "Saturday", "result": 0}], "timeframe": {"start": "2014-05-04T11:00:00.000Z", "end": "2014-05-04T12:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 6}, {"ad.advertiser": "Thursday", "result": 31}, {"ad.advertiser": "Wednesday", "result": 55}, {"ad.advertiser": "Saturday", "result": 2}], "timeframe": {"start": "2014-05-04T12:00:00.000Z", "end": "2014-05-04T13:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 4}, {"ad.advertiser": "Thursday", "result": 17}, {"ad.advertiser": "Wednesday", "result": 62}, {"ad.advertiser": "Saturday", "result": 2}], "timeframe": {"start": "2014-05-04T13:00:00.000Z", "end": "2014-05-04T14:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 16}, {"ad.advertiser": "Thursday", "result": 30}, {"ad.advertiser": "Wednesday", "result": 52}, {"ad.advertiser": "Saturday", "result": 6}], "timeframe": {"start": "2014-05-04T14:00:00.000Z", "end": "2014-05-04T15:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 8}, {"ad.advertiser": "Thursday", "result": 30}, {"ad.advertiser": "Wednesday", "result": 71}, {"ad.advertiser": "Saturday", "result": 6}], "timeframe": {"start": "2014-05-04T15:00:00.000Z", "end": "2014-05-04T16:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 16}, {"ad.advertiser": "Thursday", "result": 29}, {"ad.advertiser": "Wednesday", "result": 73}, {"ad.advertiser": "Saturday", "result": 6}], "timeframe": {"start": "2014-05-04T16:00:00.000Z", "end": "2014-05-04T17:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 8}, {"ad.advertiser": "Thursday", "result": 41}, {"ad.advertiser": "Wednesday", "result": 72}, {"ad.advertiser": "Saturday", "result": 8}], "timeframe": {"start": "2014-05-04T17:00:00.000Z", "end": "2014-05-04T18:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 13}, {"ad.advertiser": "Thursday", "result": 35}, {"ad.advertiser": "Wednesday", "result": 83}, {"ad.advertiser": "Saturday", "result": 9}], "timeframe": {"start": "2014-05-04T18:00:00.000Z", "end": "2014-05-04T19:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 8}, {"ad.advertiser": "Thursday", "result": 37}, {"ad.advertiser": "Wednesday", "result": 92}, {"ad.advertiser": "Saturday", "result": 2}], "timeframe": {"start": "2014-05-04T19:00:00.000Z", "end": "2014-05-04T20:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 14}, {"ad.advertiser": "Thursday", "result": 29}, {"ad.advertiser": "Wednesday", "result": 76}, {"ad.advertiser": "Saturday", "result": 9}], "timeframe": {"start": "2014-05-04T20:00:00.000Z", "end": "2014-05-04T21:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 14}, {"ad.advertiser": "Thursday", "result": 38}, {"ad.advertiser": "Wednesday", "result": 101}, {"ad.advertiser": "Saturday", "result": 3}], "timeframe": {"start": "2014-05-04T21:00:00.000Z", "end": "2014-05-04T22:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 7}, {"ad.advertiser": "Thursday", "result": 31}, {"ad.advertiser": "Wednesday", "result": 89}, {"ad.advertiser": "Saturday", "result": 3}], "timeframe": {"start": "2014-05-04T22:00:00.000Z", "end": "2014-05-04T23:00:00.000Z"}}, {"value": [{"ad.advertiser": "Friday", "result": 13}, {"ad.advertiser": "Thursday", "result": 26}, {"ad.advertiser": "Wednesday", "result": 81}, {"ad.advertiser": "Saturday", "result": 5}], "timeframe": {"start": "2014-05-04T23:00:00.000Z", "end": "2014-05-05T00:00:00.000Z"}}]};
var avgCheckValue = {"result":[{"value":[{"user.geo_info.country":"","result":36}],"timeframe":{"start":"2014-05-04T00:00:00.000Z","end":"2014-05-04T01:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":39}],"timeframe":{"start":"2014-05-04T01:00:00.000Z","end":"2014-05-04T02:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":49}],"timeframe":{"start":"2014-05-04T02:00:00.000Z","end":"2014-05-04T03:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":40}],"timeframe":{"start":"2014-05-04T03:00:00.000Z","end":"2014-05-04T04:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":24}],"timeframe":{"start":"2014-05-04T04:00:00.000Z","end":"2014-05-04T05:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":29}],"timeframe":{"start":"2014-05-04T05:00:00.000Z","end":"2014-05-04T06:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":23}],"timeframe":{"start":"2014-05-04T06:00:00.000Z","end":"2014-05-04T07:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":0}],"timeframe":{"start":"2014-05-04T07:00:00.000Z","end":"2014-05-04T08:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":29}],"timeframe":{"start":"2014-05-04T08:00:00.000Z","end":"2014-05-04T09:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":22}],"timeframe":{"start":"2014-05-04T09:00:00.000Z","end":"2014-05-04T10:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":24}],"timeframe":{"start":"2014-05-04T10:00:00.000Z","end":"2014-05-04T11:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":19}],"timeframe":{"start":"2014-05-04T11:00:00.000Z","end":"2014-05-04T12:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":37}],"timeframe":{"start":"2014-05-04T12:00:00.000Z","end":"2014-05-04T13:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":35}],"timeframe":{"start":"2014-05-04T13:00:00.000Z","end":"2014-05-04T14:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":38}],"timeframe":{"start":"2014-05-04T14:00:00.000Z","end":"2014-05-04T15:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":52}],"timeframe":{"start":"2014-05-04T15:00:00.000Z","end":"2014-05-04T16:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":48}],"timeframe":{"start":"2014-05-04T16:00:00.000Z","end":"2014-05-04T17:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":50}],"timeframe":{"start":"2014-05-04T17:00:00.000Z","end":"2014-05-04T18:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":48}],"timeframe":{"start":"2014-05-04T18:00:00.000Z","end":"2014-05-04T19:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":52}],"timeframe":{"start":"2014-05-04T19:00:00.000Z","end":"2014-05-04T20:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":51}],"timeframe":{"start":"2014-05-04T20:00:00.000Z","end":"2014-05-04T21:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":81}],"timeframe":{"start":"2014-05-04T21:00:00.000Z","end":"2014-05-04T22:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":58}],"timeframe":{"start":"2014-05-04T22:00:00.000Z","end":"2014-05-04T23:00:00.000Z"}},{"value":[{"user.geo_info.country":"","result":44}],"timeframe":{"start":"2014-05-04T23:00:00.000Z","end":"2014-05-05T00:00:00.000Z"}}]};
var clicksAndReservations = {"result": [{"value": 17, "timeframe": {"start": "2014-01-01T00:00:00.000Z", "end": "2014-02-01T00:00:00.000Z"}}, {"value": 10, "timeframe": {"start": "2014-02-01T00:00:00.000Z", "end": "2014-03-01T00:00:00.000Z"}}, {"value": 20, "timeframe": {"start": "2014-03-01T00:00:00.000Z", "end": "2014-04-01T00:00:00.000Z"}}, {"value": 12, "timeframe": {"start": "2014-04-01T00:00:00.000Z", "end": "2014-05-01T00:00:00.000Z"}}, {"value": 15, "timeframe": {"start": "2014-05-01T00:00:00.000Z", "end": "2014-06-01T00:00:00.000Z"}}, {"value": 13, "timeframe": {"start": "2014-06-01T00:00:00.000Z", "end": "2014-07-01T00:00:00.000Z"}}, {"value": 20, "timeframe": {"start": "2014-07-01T00:00:00.000Z", "end": "2014-08-01T00:00:00.000Z"}}, {"value": 16, "timeframe": {"start": "2014-08-01T00:00:00.000Z", "end": "2014-09-01T00:00:00.000Z"}}, {"value": 21, "timeframe": {"start": "2014-09-01T00:00:00.000Z", "end": "2014-10-01T00:00:00.000Z"}}, {"value": 17, "timeframe": {"start": "2014-10-01T00:00:00.000Z", "end": "2014-11-01T00:00:00.000Z"}}, {"value": 20, "timeframe": {"start": "2014-11-01T00:00:00.000Z", "end": "2014-12-01T00:00:00.000Z"}}]};
var heatmap = {"result": [[-122.59757816791534, 37.90547037319843], [-122.57388889789581, 37.917388584744025], [-122.51381990499793, 37.78033134425266], [-122.51380024943501, 37.780350423576174], [-122.51315094530581, 37.776379698225945], [-122.51315094530581, 37.78187463362188], [-122.51276470720768, 37.78065357216708], [-122.51250721514224, 37.77305540322005], [-122.51216389238834, 37.77115573896415], [-122.51202810555695, 37.768255264573284], [-122.51194948330522, 37.76739866996665], [-122.51162040978669, 37.768340075380664], [-122.51152016222477, 37.76097813511423], [-122.51123417168856, 37.759417445347324], [-122.51083351671696, 37.75772100607922], [-122.51068348065017, 37.75590577297909], [-122.50864483416082, 37.74360512310431], [-122.50805810093878, 37.73617284319952], [-122.5073144584894, 37.73199822176716], [-122.50688530504704, 37.72751787839528], [-122.50525452196597, 37.72218863220941], [-122.5002334266901, 37.71339623517733], [-122.48456865549088, 37.78129802378191], [-122.48096376657486, 37.8412413506598], [-122.47976280748846, 37.80239223154157], [-122.47517086565495, 37.76908640629127], [-122.470635920763, 37.801374964252865], [-122.46791750192641, 37.777634750327046], [-122.46757417917252, 37.76786513360663], [-122.46710278093813, 37.77054512223112], [-122.46487118303776, 37.80534222744762], [-122.4643126130104, 37.78265474565738], [-122.46183861047031, 37.80481666209083], [-122.45486486703156, 37.80615599868537], [-122.45323408395052, 37.8063594400937], [-122.45167848654091, 37.80624076600696], [-122.44319826364517, 37.798526541308384], [-122.44136799126862, 37.770205888533944], [-122.43993669748306, 37.7939145760416], [-122.42776030674577, 37.75867101686226], [-122.42773884907366, 37.75840806867017], [-122.42768256459384, 37.759222356811186], [-122.42718455381691, 37.75866677576982], [-122.4271255452186, 37.75877704409464], [-122.42705220356585, 37.758654052490975], [-122.42702362127602, 37.75859891825743], [-122.42611879482864, 37.75870494559314], [-122.4255734682083, 37.79323632157157], [-122.42282822728157, 37.75782279353237], [-122.42248356342317, 37.78021262835114], [-122.4196806550026, 37.800832415970085], [-122.41762071847916, 37.800832415970085], [-122.41684891283512, 37.743503316091896], [-122.41637684404849, 37.743571187449064], [-122.41591919213533, 37.743163958372556], [-122.415915671736, 37.74301973087065], [-122.41513229906558, 37.74279066308416], [-122.41500355303288, 37.7434354446725], [-122.41213111672549, 37.74706859908404], [-122.41176365409045, 37.747140708925166], [-122.41158474236727, 37.74292640704323], [-122.41098392754792, 37.74292640704323], [-122.41087663918735, 37.74292640704323], [-122.40989327430725, 37.75442980295571], [-122.4087506532669, 37.75090092768723], [-122.39873796701431, 37.803680749994065], [-122.39707935601473, 37.75537985600265]]};

Keen.ready(function(){

  // Pageviews by browser
  var pageviews_timeline = new Keen.Dataviz()
    .el('#chart-01')
    .type('area')
    .height(280)
    .stacked(true)
    .title('Traffic by Day')
    .prepare();

    pageviews_timeline
      .data(trafficChart)
      .sortGroups('desc')
      .render();


  // Pageviews by browser (pie)

  var pageviews_pie = new Keen.Dataviz()
    .el('#chart-02')
    .type('pie')
    .height(280)
    .title('Traffic Analysis')
    .prepare();
    pageviews_pie
      .data(trafficByDay)
      .sortGroups('desc')
      .render();

  // Impressions timeline

  var impressions_timeline = new Keen.Dataviz()
    .el('#chart-03')
    .type('bar')
    .height(280)
    .stacked(true)
    .title('Traffic by Time')
    .prepare();

    impressions_timeline
      .data(trafficByTime)
      .sortGroups('desc')
      .render();

  // Impressions by device

  var impressions_by_device = new Keen.Dataviz()
    .el('#chart-04')
    .type('bar')
    .height(280)
    .stacked(true)
    .title('Impressions by device')
    .prepare();

  impressions_by_device
      .data(trafficByDevice)
      .sortGroups('desc')
      .render();


  // Impressions by country

  var impressions_by_country = new Keen.Dataviz()
    .el('#chart-05')
    .type('bar')
    .height(280)
    .stacked(true)
    .title('Average Check Value (by Table)')
    .prepare();

  impressions_by_country
    .data(avgCheckValue)
    .sortGroups('desc')
    .render();

  var impressions_by_country = new Keen.Dataviz()
    .el('#chart-05')
    .type('bar')
    .height(280)
    .stacked(true)
    .title('Average Check Value (by Table)')
    .prepare();

  impressions_by_country
    .data(avgCheckValue)
    .sortGroups('desc')
    .render();

  // var chart_geographies = new Keen.Dataviz()
  //   .el('#geography')
  //   .type('horizontal-bar')
  //   .height(300);

  //   chart_geographies.prepare();
  //   chart_geographies
  //         .data(heatmap)
  //         .labelMapping({
  //           'New Jersey' : 'NJ',
  //           'Virginia' : 'VA',
  //           'California': 'CA',
  //           'Washington': 'WA',
  //           'Utah': 'UT',
  //           'Oregon': 'OR',
  //           'null': 'Other'
  //         })
  //         .sortGroups('desc')
  //         .render();

});
